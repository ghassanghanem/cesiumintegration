var grant_lots_view_id=null,dgrants_layer_view_id=null,gravesend_layer_view_id=null,native_group_layer_view_id=null,karl_layer_view_id=null,farms_layer_view_id=null,curr_layer_view_id=null,grant_lots_view_flag=!1,demo_layer_view_flag=!1,castello_layer_view_flag=!1,settlements_layer_view_flag=!1,info_layer_view_flag=!1,dgrants_layer_view_flag=!1,gravesend_layer_view_flag=!1,native_group_layer_view_flag=!1,karl_layer_view_flag=!1,farms_layer_view_flag=!1,curr_layer_view_flag=!1;$("#infoLayerGrantLots").slideUp(),$("#infoLayerDutchGrants").slideUp(),$("#infoLayerFarms").slideUp(),$("#demoLayerInfo").slideUp(),$("#infoLayerCastello").slideUp(),$("#infoLayerCurrLots").slideUp(),$("#infoLayerSettlements").slideUp(),$("#infoLayerInfoPoint").slideUp(),$("#infoLayerGravesend").slideUp(),$("#infoLayerNativeGroups").slideUp(),$("#infoLayerKarl").slideUp();const WorldBounds=[[-179,-59],[135,77]];var LongIslandBounds=[[-74.0419692,40.5419011],[-71.8562705,41.161155]],ManhattanBounds=[[-74.04772962697074,40.682916945445164],[-73.90665099539478,40.879038046804695]],NYCbounds=[[-74.25559136315213,40.496133987611834],[-73.7000090638712,40.91553277650267]],BronxBounds=[[-73.93360592036706,40.785356620508495],[-73.76533243995276,40.91553277650267]],BrooklynBounds=[[-74.04189660705046,40.56952999398417],[-73.8335592388046,40.73912795313439]],QueensBounds=[[-73.96262015898652,40.54183396045311],[-73.7000090638712,40.80101146781903]],StatenIslandBounds=[[-74.25559136315213,40.496133987611834],[-74.04923629842045,40.648925552276076]],NewNLbounds=[[-75.5588888888889,39.5483333333333],[-71.6483333333333,42.64485]],NewEnglandBounds=[[-73.6468505859375,41.017210578228436],[-69.708251953125,43.97700467496408]];mapboxgl.accessToken="pk.eyJ1Ijoibml0dHlqZWUiLCJhIjoid1RmLXpycyJ9.NFk875-Fe6hoRCkGciG8yQ";var beforeMap=new mapboxgl.Map({container:"before",style:"mapbox://styles/nittyjee/cjooubzup2kx52sqdf9zmmv2j",center:[0,0],hash:!0,zoom:0,attributionControl:!1}),afterMap=new mapboxgl.Map({container:"after",style:"mapbox://styles/nittyjee/cjowjzrig5pje2rmmnjb5b0y2",center:[0,0],hash:!0,zoom:0,attributionControl:!1}),map=new mapboxgl.Compare(beforeMap,afterMap,{}),nav=new mapboxgl.NavigationControl;beforeMap.addControl(nav,"bottom-right");var init_bearing,init_center,init_zoom;nav=new mapboxgl.NavigationControl;afterMap.addControl(nav,"bottom-right");var na_bearing=-51.3,na_center=[-74.01255,40.704882],na_zoom=16.34;function testZoom(){var e=beforeMap.getBearing(),t=[-74.01507471506183,40.70239266372983,-74.00734180289922,40.709035402164524];beforeMap.fitBounds(t,{bearing:e}),afterMap.fitBounds(t,{bearing:e})}function zoomtobounds(e){switch(e){case"LongIsland":windoWidth<=637?(beforeMap.fitBounds(LongIslandBounds,{bearing:0}),afterMap.fitBounds(LongIslandBounds,{bearing:0})):(beforeMap.fitBounds(LongIslandBounds,{bearing:0,padding:{top:5,bottom:5,left:350,right:5}}),afterMap.fitBounds(LongIslandBounds,{bearing:0,padding:{top:5,bottom:5,left:350,right:5}}));break;case"Brooklyn":beforeMap.fitBounds(BrooklynBounds,{bearing:0}),afterMap.fitBounds(BrooklynBounds,{bearing:0});break;case"NYC":beforeMap.fitBounds(NYCbounds,{bearing:0}),afterMap.fitBounds(NYCbounds,{bearing:0});break;case"NewNL":beforeMap.fitBounds(NewNLbounds,{bearing:0}),afterMap.fitBounds(NewNLbounds,{bearing:0});break;case"NewEngland":beforeMap.fitBounds(NewEnglandBounds,{bearing:0}),afterMap.fitBounds(NewEnglandBounds,{bearing:0});break;case"Manhattan":beforeMap.fitBounds(ManhattanBounds,{bearing:na_bearing}),afterMap.fitBounds(ManhattanBounds,{bearing:na_bearing});break;case"World":beforeMap.fitBounds(WorldBounds,{bearing:0}),afterMap.fitBounds(WorldBounds,{bearing:0})}}function zoomtocenter(e){switch(e){case"NA":beforeMap.easeTo({center:na_center,zoom:na_zoom,bearing:na_bearing,pitch:0}),afterMap.easeTo({center:na_center,zoom:na_zoom,bearing:na_bearing,pitch:0});break;case"Manatus Map":beforeMap.easeTo({center:[-73.9512,40.4999],zoom:9,bearing:-89.7,pitch:0}),afterMap.easeTo({center:[-73.9512,40.4999],zoom:9,bearing:-89.7,pitch:0});break;case"Original Grants":beforeMap.easeTo({center:[-73.9759,40.7628],zoom:12,bearing:-51.3,pitch:0}),afterMap.easeTo({center:[-73.9759,40.7628],zoom:12,bearing:-51.3,pitch:0});break;case"NYC plan":beforeMap.easeTo({center:[-74.01046,40.70713],zoom:15,bearing:-51.3,pitch:0}),afterMap.easeTo({center:[-74.01046,40.70713],zoom:15,bearing:-51.3,pitch:0});break;case"Ratzer Map":beforeMap.easeTo({center:[-74.00282,40.69929],zoom:12,bearing:-6.5,pitch:0}),afterMap.easeTo({center:[-74.00282,40.69929],zoom:12,bearing:-6.5,pitch:0});break;case"Long Island":beforeMap.easeTo({center:[-73.094,41.1],zoom:8,bearing:0,pitch:0}),afterMap.easeTo({center:[-73.094,41.1],zoom:8,bearing:0,pitch:0});break;case"NY Bay":beforeMap.easeTo({center:[-73.9998,40.6662],zoom:11,bearing:0,pitch:0}),afterMap.easeTo({center:[-73.9998,40.6662],zoom:11,bearing:0,pitch:0});break;case"Gravesend Map":beforeMap.easeTo({center:[-73.97629,40.60105],zoom:13,bearing:0,pitch:0}),afterMap.easeTo({center:[-73.97629,40.60105],zoom:13,bearing:0,pitch:0});break;case"Long Island 1873":beforeMap.easeTo({center:[-73.2739,40.876],zoom:8.6,bearing:0,pitch:0}),afterMap.easeTo({center:[-73.2739,40.876],zoom:8.6,bearing:0,pitch:0});break;case"Belgii Novi":beforeMap.easeTo({center:[-74.39,40.911],zoom:5.7,bearing:-7.2,pitch:0}),afterMap.easeTo({center:[-74.39,40.911],zoom:5.7,bearing:-7.2,pitch:0});break;case"New England":beforeMap.easeTo({center:[-72.898,42.015],zoom:7,bearing:0,pitch:0}),afterMap.easeTo({center:[-72.898,42.015],zoom:7,bearing:0,pitch:0})}}function zoomLabels(e){"show"==e?(beforeMap.setLayoutProperty("label-long-island","visibility","visible"),afterMap.setLayoutProperty("label-long-island","visibility","visible"),beforeMap.setLayoutProperty("label-brooklyn","visibility","visible"),afterMap.setLayoutProperty("label-brooklyn","visibility","visible"),beforeMap.setLayoutProperty("label-manhattan","visibility","visible"),afterMap.setLayoutProperty("label-manhattan","visibility","visible"),beforeMap.setLayoutProperty("label-new-amsterdam","visibility","visible"),afterMap.setLayoutProperty("label-new-amsterdam","visibility","visible"),beforeMap.setLayoutProperty("label-new-netherland","visibility","visible"),afterMap.setLayoutProperty("label-new-netherland","visibility","visible"),beforeMap.setLayoutProperty("label-new-england","visibility","visible"),afterMap.setLayoutProperty("label-new-england","visibility","visible"),document.getElementById("show-zoom-label").style.display="inline-block",document.getElementById("hide-zoom-label").style.display="none"):(beforeMap.setLayoutProperty("label-long-island","visibility","none"),afterMap.setLayoutProperty("label-long-island","visibility","none"),beforeMap.setLayoutProperty("label-brooklyn","visibility","none"),afterMap.setLayoutProperty("label-brooklyn","visibility","none"),beforeMap.setLayoutProperty("label-manhattan","visibility","none"),afterMap.setLayoutProperty("label-manhattan","visibility","none"),beforeMap.setLayoutProperty("label-new-amsterdam","visibility","none"),afterMap.setLayoutProperty("label-new-amsterdam","visibility","none"),beforeMap.setLayoutProperty("label-new-netherland","visibility","none"),afterMap.setLayoutProperty("label-new-netherland","visibility","none"),beforeMap.setLayoutProperty("label-new-england","visibility","none"),afterMap.setLayoutProperty("label-new-england","visibility","none"),document.getElementById("hide-zoom-label").style.display="inline-block",document.getElementById("show-zoom-label").style.display="none")}var rightInputs=document.getElementsByName("rtoggle");function switchRightLayer(e){var t=e.target.className;afterMap.setStyle("mapbox://styles/nittyjee/"+t)}for(var i=0;i<rightInputs.length;i++)rightInputs[i].onclick=switchRightLayer;var leftInputs=document.getElementsByName("ltoggle");function switchLeftLayer(e){var t=e.target.className;beforeMap.setStyle("mapbox://styles/nittyjee/"+t)}for(i=0;i<leftInputs.length;i++)leftInputs[i].onclick=switchLeftLayer;var urlHash=window.location.hash,castello_click_ev=!1,grant_lots_click_ev=!1,demo_taxlot_click_ev=!1,dutch_grant_click_ev=!1,gravesend_click_ev=!1,native_groups_click_ev=!1,karl_click_ev=!1,farms_click_ev=!1,curr_layer_click_ev=!1,settlements_click_ev=!1,info_click_ev=!1,zoom_labels_click_ev=!1,afterMapPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),beforeMapPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),info_popup_html="",places_popup_html="",settlements_popup_html="",afterMapPlacesPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),beforeMapPlacesPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),afterHighCastelloPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),beforeHighCastelloPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),afterHighDemoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),beforeHighDemoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),afterHighGrantLotsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeHighGrantLotsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterHighCurrLotsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeHighCurrLotsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapGrantLotPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapGrantLotPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterHighMapGrantLotPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeHighMapGrantLotPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapDutchGrantPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapDutchGrantPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapGravesendPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapGravesendPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterHighMapGravesendPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeHighMapGravesendPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapGravesendTwoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapGravesendTwoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapNativeGroupsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapNativeGroupsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterHighMapNativeGroupsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeHighMapNativeGroupsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapKarlPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapKarlPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterHighMapKarlPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeHighMapKarlPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapKarlTwoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapKarlTwoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterHighFarmPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeHighFarmPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapFarmPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapFarmPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapCurrLotsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),beforeMapCurrLotsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:5}),afterMapSettlementsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),beforeMapSettlementsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),afterHighMapSettlementsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),beforeHighMapSettlementsPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),afterMapInfoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),beforeMapInfoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),afterHighMapInfoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),beforeHighMapInfoPopUp=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1}),hoveredStateIdRight=null,hoveredStateIdLeft=null,hoveredStateIdRightCircle=null,hoveredStateIdLeftCircle=null,hoveredGrantStateIdRight=null,hoveredGrantStateIdLeft=null,hoveredGrantLotIdRight=null,hoveredGrantLotIdLeft=null,hoveredDutchGrantIdRight=null,hoveredDutchGrantIdLeft=null,hoveredGravesendIdRight=null,hoveredGravesendIdLeft=null,hoveredNativeGroupsIdRight=null,hoveredNativeGroupsIdLeft=null,hoveredKarlIdRight=null,hoveredKarlIdLeft=null,hoveredFarmsIdRight=null,hoveredFarmsIdLeft=null,hoveredCurrLotsIdRight=null,hoveredCurrLotsIdLeft=null,hoveredSettlementsIdRight=null,hoveredSettlementsIdLeft=null;hoveredInfoIdRight=null,hoveredInfoIdLeft=null;var clickedInfoId=null,clickedStateId=null,clickedSettlementsId=null,demo_layer_features=null;function DefaultHandle(){demo_taxlot_click_ev||castello_click_ev||grant_lots_click_ev||dutch_grant_click_ev||farms_click_ev||curr_layer_click_ev||settlements_click_ev||info_click_ev||gravesend_click_ev||native_groups_click_ev||karl_click_ev||zoom_labels_click_ev||windoWidth>637&&$("#view-hide-layer-panel").length>0&&$("#view-hide-layer-panel").trigger("click"),demo_taxlot_click_ev=!1,castello_click_ev=!1,grant_lots_click_ev=!1,dutch_grant_click_ev=!1,farms_click_ev=!1,curr_layer_click_ev=!1,settlements_click_ev=!1,info_click_ev=!1,gravesend_click_ev=!1,native_groups_click_ev=!1,karl_click_ev=!1,zoom_labels_click_ev=!1}function CurrLotsHandle(e){var t="<div class='infoLayerCurrLotsPopUp'><b>"+e.features[0].properties.OwnerName+"</b><br>"+e.features[0].properties.Address+"</div>";curr_layer_view_id==e.features[0].id?curr_layer_view_flag?($("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeCurrLotsInfo()):(buildCurrLotsPopUpInfo(e.features[0].properties),"infoLayerCurrLots"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerCurrLots").insertBefore($(".infoLayerElem").first()),$("#infoLayerCurrLots").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),curr_layer_view_flag=!0,afterMap.setFeatureState({source:"curr-lots-high-right",sourceLayer:"current_lots_1-ca6kq1",id:curr_layer_view_id},{hover:!0}),beforeMap.setFeatureState({source:"curr-lots-high-left",sourceLayer:"current_lots_1-ca6kq1",id:curr_layer_view_id},{hover:!0}),afterHighCurrLotsPopUp.setLngLat(e.lngLat).setHTML(t),afterHighCurrLotsPopUp.isOpen()||afterHighCurrLotsPopUp.addTo(afterMap),beforeHighCurrLotsPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighCurrLotsPopUp.isOpen()||beforeHighCurrLotsPopUp.addTo(beforeMap)):(buildCurrLotsPopUpInfo(e.features[0].properties),"infoLayerCurrLots"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerCurrLots").insertBefore($(".infoLayerElem").first()),$("#infoLayerCurrLots").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),curr_layer_view_flag=!0,afterMap.setFeatureState({source:"curr-lots-high-right",sourceLayer:"current_lots_1-ca6kq1",id:curr_layer_view_id},{hover:!1}),afterMap.setFeatureState({source:"curr-lots-high-right",sourceLayer:"current_lots_1-ca6kq1",id:e.features[0].id},{hover:!0}),beforeMap.setFeatureState({source:"curr-lots-high-left",sourceLayer:"current_lots_1-ca6kq1",id:curr_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"curr-lots-high-left",sourceLayer:"current_lots_1-ca6kq1",id:e.features[0].id},{hover:!0}),afterHighCurrLotsPopUp.setLngLat(e.lngLat).setHTML(t),afterHighCurrLotsPopUp.isOpen()||afterHighCurrLotsPopUp.addTo(afterMap),beforeHighCurrLotsPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighCurrLotsPopUp.isOpen()||beforeHighCurrLotsPopUp.addTo(beforeMap)),curr_layer_view_id=e.features[0].id,curr_layer_click_ev=!0}function GrantLotsHandle(e){var t="<div class='infoLayerGrantLotsPopUp'>"+e.features[0].properties.name+"<br><b>Start:</b> "+e.features[0].properties.day1+", "+e.features[0].properties.year1+"<br><b>End:</b> "+e.features[0].properties.day2+", "+e.features[0].properties.year2+"<br><b>Lot Division: </b>"+e.features[0].properties.dutchlot+"</div>";grant_lots_view_id==e.features[0].id&&grant_lots_view_flag?($("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeGrantLotsInfo()):(buildGrantLotsPopUpInfo(e.features[0].properties),console.log($(".infoLayerElem").first().attr("id")),"infoLayerGrantLots"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerGrantLots").insertBefore($(".infoLayerElem").first()),$("#infoLayerGrantLots").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),grant_lots_view_flag=!0,afterHighGrantLotsPopUp.setLngLat(e.lngLat).setHTML(t),afterHighGrantLotsPopUp.isOpen()||afterHighGrantLotsPopUp.addTo(afterMap),beforeHighGrantLotsPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighGrantLotsPopUp.isOpen()||beforeHighGrantLotsPopUp.addTo(beforeMap)),grant_lots_view_id=e.features[0].id,grant_lots_click_ev=!0}function DemoClickHandle(e){if(demo_layer_view_flag)$("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeDemoInfo();else{buildPopUpInfo(e.features[0].properties),"demoLayerInfo"!=$(".infoLayerElem").first().attr("id")&&$("#demoLayerInfo").insertBefore($(".infoLayerElem").first()),$("#demoLayerInfo").slideDown(),layer_view_flag||$("#view-hide-layer-panel").length>0&&$("#view-hide-layer-panel").trigger("click"),demo_layer_view_flag=!0;var t=[];for(t=e.features[0].geometry.coordinates.slice();Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;beforeHighDemoPopUp.setLngLat(t).setHTML("<div class='demoLayerInfoPopUp'><b><h2>Taxlot: <a href='https://encyclopedia.nahc-mapping.org/taxlot/c7' target='_blank'>C7</a></h2></b></div>"),beforeHighDemoPopUp.isOpen()||beforeHighDemoPopUp.addTo(beforeMap),afterHighDemoPopUp.setLngLat(t).setHTML("<div class='demoLayerInfoPopUp'><b><h2>Taxlot: <a href='https://encyclopedia.nahc-mapping.org/taxlot/c7' target='_blank'>C7</a></h2></b></div>"),afterHighDemoPopUp.isOpen()||afterHighDemoPopUp.addTo(afterMap)}demo_taxlot_click_ev=!0}function SettlementsClickHandle(e){if(console.log(e.features[0]),settlements_layer_view_flag&&clickedSettlementsId==e.features[0].id)$("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeSettlementsInfo();else{clickedSettlementsId=e.features[0].id;var t=e.features[0].properties.node_id.replace(/\/node\//g,"");console.log(t),console.log(settlements_info.length),settlements_popup_html="<h3>Settlement</h3><hr>",void 0===settlements_info[t]?settlements_popup_html+="<h3>"+e.features[0].properties.enc_name+"</h3>":(settlements_popup_html+="<h3>"+settlements_info[t].name+"</h3><br><b>Date: </b><i>"+settlements_info[t].date+"</i><br><br><i>"+settlements_info[t].descr+"</i>"+(settlements_info[t].img1.length>0?"<img src='"+settlements_info[t].img1+"'  width='258' ><br>":"")+(settlements_info[t].img2.length>0?"<img src='"+settlements_info[t].img2+"'  width='258' ><br>":"")+(settlements_info[t].img3.length>0?"<img src='"+settlements_info[t].img3+"'  width='258' ><br>":""),console.warn(settlements_info[t].curr_loc_target),console.warn(settlements_linked_location[settlements_info[t].curr_loc_target]));var a=[];for(a=e.features[0].geometry.coordinates.slice();Math.abs(e.lngLat.lng-a[0])>180;)a[0]+=e.lngLat.lng>a[0]?360:-360;beforeHighMapSettlementsPopUp.setLngLat(a).setHTML("<div class='infoLayerSettlementsPopUp'><b>"+e.features[0].properties.corr_label+"</b><br></div>"),beforeHighMapSettlementsPopUp.isOpen()||beforeHighMapSettlementsPopUp.addTo(beforeMap),afterHighMapSettlementsPopUp.setLngLat(a).setHTML("<div class='infoLayerSettlementsPopUp'><b>"+e.features[0].properties.corr_label+"</b><br></div>"),afterHighMapSettlementsPopUp.isOpen()||afterHighMapSettlementsPopUp.addTo(afterMap),"infoLayerSettlements"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerSettlements").insertBefore($(".infoLayerElem").first()),$("#infoLayerSettlements").html(settlements_popup_html).slideDown(),layer_view_flag||$("#view-hide-layer-panel").length>0&&$("#view-hide-layer-panel").trigger("click"),settlements_layer_view_flag=!0}settlements_click_ev=!0}function InfoClickHandle(e){if(console.log(e.features[0]),info_layer_view_flag&&clickedInfoId==e.features[0].id)$("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeInfoLayerInfo();else{clickedInfoId=e.features[0].id;var t=e.features[0].properties.nid;console.log(t),console.log(infos_entity.length),info_popup_html="<h3>Info</h3><hr>",void 0===infos_entity[t]||""==t?info_popup_html+="<b>"+e.features[0].properties.Label+"</b><br><br>":info_popup_html+="<b>"+(infos_entity[t].name_html.length>0?infos_entity[t].name_html:e.features[0].properties.Label)+"</b><br><br><i>"+infos_entity[t].descr+"</i>";var a=[];for(a=e.features[0].geometry.coordinates.slice();Math.abs(e.lngLat.lng-a[0])>180;)a[0]+=e.lngLat.lng>a[0]?360:-360;beforeHighMapInfoPopUp.setLngLat(a).setHTML("<div class='infoLayerInfoPointPopUp'><b>"+e.features[0].properties.Label+"</b><br></div>"),beforeHighMapInfoPopUp.isOpen()||beforeHighMapInfoPopUp.addTo(beforeMap),afterHighMapInfoPopUp.setLngLat(a).setHTML("<div class='infoLayerInfoPointPopUp'><b>"+e.features[0].properties.Label+"</b><br></div>"),afterHighMapInfoPopUp.isOpen()||afterHighMapInfoPopUp.addTo(afterMap),"infoLayerInfoPoint"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerInfoPoint").insertBefore($(".infoLayerElem").first()),$("#infoLayerInfoPoint").html(info_popup_html).slideDown(),layer_view_flag||$("#view-hide-layer-panel").length>0&&$("#view-hide-layer-panel").trigger("click"),info_layer_view_flag=!0}info_click_ev=!0}function CastelloClickHandle(e){if(castello_layer_view_flag&&clickedStateId==e.features[0].id)$("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeCastelloInfo();else{clickedStateId=e.features[0].id,places_popup_html="<h3>Castello Taxlot (1660)</h3><hr><br><b>Taxlot: </b>"+e.features[0].properties.LOT2+"<br><b>Property Type: </b>"+e.features[0].properties.tax_lots_1+'<br><br><b>Encyclopedia Page: </b><br><a href="'+e.features[0].properties.new_link+'" target="_blank">'+e.features[0].properties.new_link+"</a>";var t=[];for(t=e.features[0].geometry.coordinates.slice();Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;beforeHighCastelloPopUp.setLngLat(t).setHTML("<div class='infoLayerCastelloPopUp'><b>Taxlot (1660):</b><br>"+e.features[0].properties.LOT2+"</div>"),beforeHighCastelloPopUp.isOpen()||beforeHighCastelloPopUp.addTo(beforeMap),afterHighCastelloPopUp.setLngLat(t).setHTML("<div class='infoLayerCastelloPopUp'><b>Taxlot (1660):</b><br>"+e.features[0].properties.LOT2+"</div>"),afterHighCastelloPopUp.isOpen()||afterHighCastelloPopUp.addTo(afterMap),"infoLayerCastello"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerCastello").insertBefore($(".infoLayerElem").first()),$("#infoLayerCastello").html(places_popup_html).slideDown(),layer_view_flag||$("#view-hide-layer-panel").length>0&&$("#view-hide-layer-panel").trigger("click"),castello_layer_view_flag=!0}castello_click_ev=!0}function FarmsClickHandle(e){var t="<div class='infoLayerFarmsPopUp'>"+e.features[0].properties.To+"</div>";farms_layer_view_id==e.features[0].id?farms_layer_view_flag?($("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeFarmsInfo()):(buildFarmsPopUpInfo(e.features[0].properties),"infoLayerFarms"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerFarms").insertBefore($(".infoLayerElem").first()),$("#infoLayerFarms").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),farms_layer_view_flag=!0,afterMap.setFeatureState({source:"stokes_farms_complete_5_reduc-6k9tbl-right-highlighted",sourceLayer:"stokes_farms_complete_5_reduc-6k9tbl",id:farms_layer_view_id},{hover:!0}),beforeMap.setFeatureState({source:"stokes_farms_complete_5_reduc-6k9tbl-left-highlighted",sourceLayer:"stokes_farms_complete_5_reduc-6k9tbl",id:farms_layer_view_id},{hover:!0}),afterHighFarmPopUp.setLngLat(e.lngLat).setHTML(t),afterHighFarmPopUp.isOpen()||afterHighFarmPopUp.addTo(afterMap),beforeHighFarmPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighFarmPopUp.isOpen()||beforeHighFarmPopUp.addTo(beforeMap)):(buildFarmsPopUpInfo(e.features[0].properties),"infoLayerFarms"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerFarms").insertBefore($(".infoLayerElem").first()),$("#infoLayerFarms").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),farms_layer_view_flag=!0,afterMap.setFeatureState({source:"stokes_farms_complete_5_reduc-6k9tbl-right-highlighted",sourceLayer:"stokes_farms_complete_5_reduc-6k9tbl",id:farms_layer_view_id},{hover:!1}),afterMap.setFeatureState({source:"stokes_farms_complete_5_reduc-6k9tbl-right-highlighted",sourceLayer:"stokes_farms_complete_5_reduc-6k9tbl",id:e.features[0].id},{hover:!0}),beforeMap.setFeatureState({source:"stokes_farms_complete_5_reduc-6k9tbl-left-highlighted",sourceLayer:"stokes_farms_complete_5_reduc-6k9tbl",id:farms_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"stokes_farms_complete_5_reduc-6k9tbl-left-highlighted",sourceLayer:"stokes_farms_complete_5_reduc-6k9tbl",id:e.features[0].id},{hover:!0}),afterHighFarmPopUp.setLngLat(e.lngLat).setHTML(t),afterHighFarmPopUp.isOpen()||afterHighFarmPopUp.addTo(afterMap),beforeHighFarmPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighFarmPopUp.isOpen()||beforeHighFarmPopUp.addTo(beforeMap)),farms_layer_view_id=e.features[0].id,farms_click_ev=!0}function DutchGrantsClickHandle(e){var t="";t=void 0===dutch_grant_lots_info[e.features[0].properties.Lot]?"<div class='infoLayerDutchGrantsPopUp'>"+e.features[0].properties.name+"<br>":"<div class='infoLayerDutchGrantsPopUp'>"+(dutch_grant_lots_info[e.features[0].properties.Lot].name_txt.length>0?dutch_grant_lots_info[e.features[0].properties.Lot].name_txt:e.features[0].properties.name)+"<br>",t+="<b>Dutch Grant Lot: </b>"+e.features[0].properties.Lot+"</div>",dgrants_layer_view_id==e.features[0].id?dgrants_layer_view_flag?($("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeDutchGrantsInfo()):(buildDutchGrantPopUpInfo(e.features[0].properties),"infoLayerDutchGrants"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerDutchGrants").insertBefore($(".infoLayerElem").first()),$("#infoLayerDutchGrants").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),dgrants_layer_view_flag=!0,afterMap.setFeatureState({source:"grants1-5sp9tb-right-highlighted",sourceLayer:"grants1-5sp9tb",id:dgrants_layer_view_id},{hover:!0}),beforeMap.setFeatureState({source:"grants1-5sp9tb-left-highlighted",sourceLayer:"grants1-5sp9tb",id:dgrants_layer_view_id},{hover:!0}),afterHighMapGrantLotPopUp.setLngLat(e.lngLat).setHTML(t),afterHighMapGrantLotPopUp.isOpen()||afterHighMapGrantLotPopUp.addTo(afterMap),beforeHighMapGrantLotPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighMapGrantLotPopUp.isOpen()||beforeHighMapGrantLotPopUp.addTo(beforeMap)):(buildDutchGrantPopUpInfo(e.features[0].properties),"infoLayerDutchGrants"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerDutchGrants").insertBefore($(".infoLayerElem").first()),$("#infoLayerDutchGrants").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),dgrants_layer_view_flag=!0,afterMap.setFeatureState({source:"grants1-5sp9tb-right-highlighted",sourceLayer:"grants1-5sp9tb",id:dgrants_layer_view_id},{hover:!1}),afterMap.setFeatureState({source:"grants1-5sp9tb-right-highlighted",sourceLayer:"grants1-5sp9tb",id:e.features[0].id},{hover:!0}),beforeMap.setFeatureState({source:"grants1-5sp9tb-left-highlighted",sourceLayer:"grants1-5sp9tb",id:dgrants_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"grants1-5sp9tb-left-highlighted",sourceLayer:"grants1-5sp9tb",id:e.features[0].id},{hover:!0}),afterHighMapGrantLotPopUp.setLngLat(e.lngLat).setHTML(t),afterHighMapGrantLotPopUp.isOpen()||afterHighMapGrantLotPopUp.addTo(afterMap),beforeHighMapGrantLotPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighMapGrantLotPopUp.isOpen()||beforeHighMapGrantLotPopUp.addTo(beforeMap)),dgrants_layer_view_id=e.features[0].id,dutch_grant_click_ev=!0}function GravesendClickHandle(e){var t="<div class='infoLayerGravesendPopUp'><b>Name : </b>"+e.features[0].properties.Name+"</div>";gravesend_layer_view_id==e.features[0].id?gravesend_layer_view_flag?($("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeGravesendInfo()):(buildGravesendPopUpInfo(e.features[0].properties),"infoLayerGravesend"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerGravesend").insertBefore($(".infoLayerElem").first()),$("#infoLayerGravesend").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),gravesend_layer_view_flag=!0,afterMap.setFeatureState({source:"gravesend_boundaries-c6qrbw-right-highlighted",sourceLayer:"gravesend_boundaries-c6qrbw",id:gravesend_layer_view_id},{hover:!0}),beforeMap.setFeatureState({source:"gravesend_boundaries-c6qrbw-left-highlighted",sourceLayer:"gravesend_boundaries-c6qrbw",id:gravesend_layer_view_id},{hover:!0}),afterHighMapGravesendPopUp.setLngLat(e.lngLat).setHTML(t),afterHighMapGravesendPopUp.isOpen()||afterHighMapGravesendPopUp.addTo(afterMap),beforeHighMapGravesendPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighMapGravesendPopUp.isOpen()||beforeHighMapGravesendPopUp.addTo(beforeMap)):(buildGravesendPopUpInfo(e.features[0].properties),"infoLayerGravesend"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerGravesend").insertBefore($(".infoLayerElem").first()),$("#infoLayerGravesend").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),gravesend_layer_view_flag=!0,afterMap.setFeatureState({source:"gravesend_boundaries-c6qrbw-right-highlighted",sourceLayer:"gravesend_boundaries-c6qrbw",id:gravesend_layer_view_id},{hover:!1}),afterMap.setFeatureState({source:"gravesend_boundaries-c6qrbw-right-highlighted",sourceLayer:"gravesend_boundaries-c6qrbw",id:e.features[0].id},{hover:!0}),beforeMap.setFeatureState({source:"gravesend_boundaries-c6qrbw-left-highlighted",sourceLayer:"gravesend_boundaries-c6qrbw",id:gravesend_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"gravesend_boundaries-c6qrbw-left-highlighted",sourceLayer:"gravesend_boundaries-c6qrbw",id:e.features[0].id},{hover:!0}),afterHighMapGravesendPopUp.setLngLat(e.lngLat).setHTML(t),afterHighMapGravesendPopUp.isOpen()||afterHighMapGravesendPopUp.addTo(afterMap),beforeHighMapGravesendPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighMapGravesendPopUp.isOpen()||beforeHighMapGravesendPopUp.addTo(beforeMap)),gravesend_layer_view_id=e.features[0].id,gravesend_click_ev=!0}function NativeGroupsClickHandle(e){var t="";t=void 0===taxlot_event_entities_info[e.features[0].properties.nid]||""==e.features[0].properties.nid?"<div class='infoLayerCastelloPopUp'><b>Name : </b>"+e.features[0].properties.name+"</div>":"<div class='infoLayerCastelloPopUp'><b>Name : </b>"+(taxlot_event_entities_info[e.features[0].properties.nid].name.length>0?taxlot_event_entities_info[e.features[0].properties.nid].name:e.features[0].properties.name)+"</div>",native_group_layer_view_id==e.features[0].id?native_group_layer_view_flag?($("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeNativeGroupsInfo()):(buildNativeGroupPopUpInfo(e.features[0].properties),"infoLayerNativeGroups"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerNativeGroups").insertBefore($(".infoLayerElem").first()),$("#infoLayerNativeGroups").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),native_group_layer_view_flag=!0,afterMap.setFeatureState({source:"native-groups-area-right-highlighted",sourceLayer:"long_island_indian_areas-3o4hr7",id:native_group_layer_view_id},{hover:!0}),beforeMap.setFeatureState({source:"native-groups-area-left-highlighted",sourceLayer:"long_island_indian_areas-3o4hr7",id:native_group_layer_view_id},{hover:!0}),afterHighMapNativeGroupsPopUp.setLngLat(e.lngLat).setHTML(t),afterHighMapNativeGroupsPopUp.isOpen()||afterHighMapNativeGroupsPopUp.addTo(afterMap),beforeHighMapNativeGroupsPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighMapNativeGroupsPopUp.isOpen()||beforeHighMapNativeGroupsPopUp.addTo(beforeMap)):(buildNativeGroupPopUpInfo(e.features[0].properties),"infoLayerNativeGroups"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerNativeGroups").insertBefore($(".infoLayerElem").first()),$("#infoLayerNativeGroups").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),native_group_layer_view_flag=!0,afterMap.setFeatureState({source:"native-groups-area-right-highlighted",sourceLayer:"long_island_indian_areas-3o4hr7",id:native_group_layer_view_id},{hover:!1}),afterMap.setFeatureState({source:"native-groups-area-right-highlighted",sourceLayer:"long_island_indian_areas-3o4hr7",id:e.features[0].id},{hover:!0}),beforeMap.setFeatureState({source:"native-groups-area-left-highlighted",sourceLayer:"long_island_indian_areas-3o4hr7",id:native_group_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"native-groups-area-left-highlighted",sourceLayer:"long_island_indian_areas-3o4hr7",id:e.features[0].id},{hover:!0}),afterHighMapNativeGroupsPopUp.setLngLat(e.lngLat).setHTML(t),afterHighMapNativeGroupsPopUp.isOpen()||afterHighMapNativeGroupsPopUp.addTo(afterMap),beforeHighMapNativeGroupsPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighMapNativeGroupsPopUp.isOpen()||beforeHighMapNativeGroupsPopUp.addTo(beforeMap)),native_group_layer_view_id=e.features[0].id,native_groups_click_ev=!0}function KarlClickHandle(e){var t="<div class='infoLayerKarlPopUp'><b>Name : </b>"+e.features[0].properties.corr_label+"</div>";karl_layer_view_id==e.features[0].id?karl_layer_view_flag?($("#view-hide-layer-panel").length>0&&(layer_view_flag||($("#rightInfoBar").css("display","block"),setTimeout((function(){$("#rightInfoBar").slideUp()}),500))),closeKarlInfo()):(buildKarlPopUpInfo(e.features[0].properties),"infoLayerKarl"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerKarl").insertBefore($(".infoLayerElem").first()),$("#infoLayerKarl").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),karl_layer_view_flag=!0,afterMap.setFeatureState({source:"karl_long_island-right-highlighted",sourceLayer:"karl_areas-8j4ru6",id:karl_layer_view_id},{hover:!0}),beforeMap.setFeatureState({source:"karl_long_island-left-highlighted",sourceLayer:"karl_areas-8j4ru6",id:karl_layer_view_id},{hover:!0}),afterHighMapKarlPopUp.setLngLat(e.lngLat).setHTML(t),afterHighMapKarlPopUp.isOpen()||afterHighMapKarlPopUp.addTo(afterMap),beforeHighMapKarlPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighMapKarlPopUp.isOpen()||beforeHighMapKarlPopUp.addTo(beforeMap)):(buildKarlPopUpInfo(e.features[0].properties),"infoLayerKarl"!=$(".infoLayerElem").first().attr("id")&&$("#infoLayerKarl").insertBefore($(".infoLayerElem").first()),$("#infoLayerKarl").slideDown(),$("#view-hide-layer-panel").length>0&&(layer_view_flag||$("#view-hide-layer-panel").trigger("click")),karl_layer_view_flag=!0,afterMap.setFeatureState({source:"karl_long_island-right-highlighted",sourceLayer:"karl_areas-8j4ru6",id:karl_layer_view_id},{hover:!1}),afterMap.setFeatureState({source:"karl_long_island-right-highlighted",sourceLayer:"karl_areas-8j4ru6",id:e.features[0].id},{hover:!0}),beforeMap.setFeatureState({source:"karl_long_island-left-highlighted",sourceLayer:"karl_areas-8j4ru6",id:karl_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"karl_long_island-left-highlighted",sourceLayer:"karl_areas-8j4ru6",id:e.features[0].id},{hover:!0}),afterHighMapKarlPopUp.setLngLat(e.lngLat).setHTML(t),afterHighMapKarlPopUp.isOpen()||afterHighMapKarlPopUp.addTo(afterMap),beforeHighMapKarlPopUp.setLngLat(e.lngLat).setHTML(t),beforeHighMapKarlPopUp.isOpen()||beforeHighMapKarlPopUp.addTo(beforeMap)),karl_layer_view_id=e.features[0].id,karl_click_ev=!0}function closeGrantLotsInfo(){$("#infoLayerGrantLots").slideUp(),grant_lots_view_flag=!1,afterHighGrantLotsPopUp.isOpen()&&afterHighGrantLotsPopUp.remove(),beforeHighGrantLotsPopUp.isOpen()&&beforeHighGrantLotsPopUp.remove()}function closeDemoInfo(){$("#demoLayerInfo").slideUp(),demo_layer_view_flag=!1,afterHighDemoPopUp.isOpen()&&afterHighDemoPopUp.remove(),beforeHighDemoPopUp.isOpen()&&beforeHighDemoPopUp.remove()}function closeCastelloInfo(){$("#infoLayerCastello").slideUp(),castello_layer_view_flag=!1,afterHighCastelloPopUp.isOpen()&&afterHighCastelloPopUp.remove(),beforeHighCastelloPopUp.isOpen()&&beforeHighCastelloPopUp.remove()}function closeSettlementsInfo(){$("#infoLayerSettlements").slideUp(),settlements_layer_view_flag=!1,afterHighMapSettlementsPopUp.isOpen()&&afterHighMapSettlementsPopUp.remove(),beforeHighMapSettlementsPopUp.isOpen()&&beforeHighMapSettlementsPopUp.remove()}function closeInfoLayerInfo(){$("#infoLayerInfoPoint").slideUp(),info_layer_view_flag=!1,afterHighMapInfoPopUp.isOpen()&&afterHighMapInfoPopUp.remove(),beforeHighMapInfoPopUp.isOpen()&&beforeHighMapInfoPopUp.remove()}function closeDutchGrantsInfo(){$("#infoLayerDutchGrants").slideUp(),dgrants_layer_view_flag=!1,afterMap.setFeatureState({source:"grants1-5sp9tb-right-highlighted",sourceLayer:"grants1-5sp9tb",id:dgrants_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"grants1-5sp9tb-left-highlighted",sourceLayer:"grants1-5sp9tb",id:dgrants_layer_view_id},{hover:!1}),afterHighMapGrantLotPopUp.isOpen()&&afterHighMapGrantLotPopUp.remove(),beforeHighMapGrantLotPopUp.isOpen()&&beforeHighMapGrantLotPopUp.remove()}function closeGravesendInfo(){$("#infoLayerGravesend").slideUp(),gravesend_layer_view_flag=!1,afterMap.setFeatureState({source:"gravesend_boundaries-c6qrbw-right-highlighted",sourceLayer:"gravesend_boundaries-c6qrbw",id:gravesend_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"gravesend_boundaries-c6qrbw-left-highlighted",sourceLayer:"gravesend_boundaries-c6qrbw",id:gravesend_layer_view_id},{hover:!1}),afterHighMapGravesendPopUp.isOpen()&&afterHighMapGravesendPopUp.remove(),beforeHighMapGravesendPopUp.isOpen()&&beforeHighMapGravesendPopUp.remove()}function closeNativeGroupsInfo(){$("#infoLayerNativeGroups").slideUp(),native_group_layer_view_flag=!1,afterMap.setFeatureState({source:"native-groups-area-right-highlighted",sourceLayer:"long_island_indian_areas-3o4hr7",id:native_group_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"native-groups-area-left-highlighted",sourceLayer:"long_island_indian_areas-3o4hr7",id:native_group_layer_view_id},{hover:!1}),afterHighMapNativeGroupsPopUp.isOpen()&&afterHighMapNativeGroupsPopUp.remove(),beforeHighMapNativeGroupsPopUp.isOpen()&&beforeHighMapNativeGroupsPopUp.remove()}function closeKarlInfo(){$("#infoLayerKarl").slideUp(),karl_layer_view_flag=!1,afterMap.setFeatureState({source:"karl_long_island-right-highlighted",sourceLayer:"karl_areas-8j4ru6",id:karl_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"karl_long_island-left-highlighted",sourceLayer:"karl_areas-8j4ru6",id:karl_layer_view_id},{hover:!1}),afterHighMapKarlPopUp.isOpen()&&afterHighMapKarlPopUp.remove(),beforeHighMapKarlPopUp.isOpen()&&beforeHighMapKarlPopUp.remove()}function closeFarmsInfo(){$("#infoLayerFarms").slideUp(),farms_layer_view_flag=!1,afterMap.setFeatureState({source:"stokes_farms_complete_5_reduc-6k9tbl-right-highlighted",sourceLayer:"stokes_farms_complete_5_reduc-6k9tbl",id:farms_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"stokes_farms_complete_5_reduc-6k9tbl-left-highlighted",sourceLayer:"stokes_farms_complete_5_reduc-6k9tbl",id:farms_layer_view_id},{hover:!1}),afterHighFarmPopUp.isOpen()&&afterHighFarmPopUp.remove(),beforeHighFarmPopUp.isOpen()&&beforeHighFarmPopUp.remove()}function closeCurrLotsInfo(){$("#infoLayerCurrLots").slideUp(),curr_layer_view_flag=!1,afterMap.setFeatureState({source:"curr-lots-high-right",sourceLayer:"current_lots_1-ca6kq1",id:curr_layer_view_id},{hover:!1}),beforeMap.setFeatureState({source:"curr-lots-high-left",sourceLayer:"current_lots_1-ca6kq1",id:curr_layer_view_id},{hover:!1}),afterHighCurrLotsPopUp.isOpen()&&afterHighCurrLotsPopUp.remove(),beforeHighCurrLotsPopUp.isOpen()&&beforeHighCurrLotsPopUp.remove()}function changeDate(e){parseInt(moment.unix(e).format("YYYY"));var t=parseInt(moment.unix(e).format("YYYYMMDD")),a=["all",["<=","DayStart",t],[">=","DayEnd",t]];beforeMap.setFilter("grants1-5sp9tb-left",a),afterMap.setFilter("grants1-5sp9tb-right",a),beforeMap.setFilter("grants1-5sp9tb-left-highlighted",a),afterMap.setFilter("grants1-5sp9tb-right-highlighted",a),beforeMap.setFilter("stokes_farms_complete_5_reduc-6k9tbl-left",a),afterMap.setFilter("stokes_farms_complete_5_reduc-6k9tbl-right",a),beforeMap.setFilter("stokes_farms_complete_5_reduc-6k9tbl-left-highlighted",a),afterMap.setFilter("stokes_farms_complete_5_reduc-6k9tbl-right-highlighted",a),beforeMap.setFilter("c7_dates-ajsksu-left",a),afterMap.setFilter("c7_dates-ajsksu-right",a),beforeMap.setFilter("grant-lots-left",a),afterMap.setFilter("grant-lots-right",a),beforeMap.setFilter("grant-lots-lines-left",a),afterMap.setFilter("grant-lots-lines-right",a),beforeMap.setFilter("farms-lines-left",a),afterMap.setFilter("farms-lines-right",a),beforeMap.setFilter("settlements-left",a),afterMap.setFilter("settlements-right",a),beforeMap.setFilter("info-points-left",a),afterMap.setFilter("info-points-right",a),beforeMap.setFilter("info-labels-left",a),afterMap.setFilter("info-labels-right",a),beforeMap.setFilter("settlements-labels-left",a),afterMap.setFilter("settlements-labels-right",a),beforeMap.setFilter("gravesend_boundaries-c6qrbw-left",a),afterMap.setFilter("gravesend_boundaries-c6qrbw-right",a),beforeMap.setFilter("gravesend_boundaries-c6qrbw-left-highlighted",a),afterMap.setFilter("gravesend_boundaries-c6qrbw-right-highlighted",a),beforeMap.setFilter("gravesend-lines-left",a),afterMap.setFilter("gravesend-lines-right",a),beforeMap.setFilter("karl_long_island-left",a),afterMap.setFilter("karl_long_island-right",a),beforeMap.setFilter("karl_long_island-left-highlighted",a),afterMap.setFilter("karl_long_island-right-highlighted",a),beforeMap.setFilter("karl-lines-left",a),afterMap.setFilter("karl-lines-right",a),demo_layer_features=afterMap.queryRenderedFeatures({layers:["c7_dates-ajsksu-right"]}),demo_layer_view_flag&&buildPopUpInfo(demo_layer_features[0].properties)}beforeMap.on("load",(function(){console.log("load"),init_zoom=beforeMap.getZoom(),init_bearing=beforeMap.getBearing(),init_center=beforeMap.getCenter();var e=moment($("#date").val()).unix();parseInt(moment.unix(e).format("YYYY")),parseInt(moment.unix(e).format("YYYYMMDD"));beforeMap.on("click","c7_dates-ajsksu-left",(function(e){DemoClickHandle(e)})).on("click","places-left",(function(e){CastelloClickHandle(e)})).on("click","settlements-left",(function(e){SettlementsClickHandle(e)})).on("click","info-points-left",(function(e){InfoClickHandle(e)})).on("click","grant-lots-left",(function(e){GrantLotsHandle(e)})).on("click","stokes_farms_complete_5_reduc-6k9tbl-left",(function(e){FarmsClickHandle(e)})).on("click","grants1-5sp9tb-left",(function(e){DutchGrantsClickHandle(e)})).on("click","gravesend_boundaries-c6qrbw-left",(function(e){GravesendClickHandle(e)})).on("click","native-groups-area-left",(function(e){NativeGroupsClickHandle(e)})).on("click","karl_long_island-left",(function(e){KarlClickHandle(e)})).on("click","curr-lots-left",(function(e){CurrLotsHandle(e)})).on("click",(function(){DefaultHandle()}))})),afterMap.on("load",(function(){console.log("load");var e=moment($("#date").val()).unix();parseInt(moment.unix(e).format("YYYY")),parseInt(moment.unix(e).format("YYYYMMDD"));afterMap.on("click","c7_dates-ajsksu-right",(function(e){DemoClickHandle(e)})).on("click","places-right",(function(e){CastelloClickHandle(e)})).on("click","settlements-right",(function(e){SettlementsClickHandle(e)})).on("click","info-points-right",(function(e){InfoClickHandle(e)})).on("click","grant-lots-right",(function(e){GrantLotsHandle(e)})).on("click","stokes_farms_complete_5_reduc-6k9tbl-right",(function(e){FarmsClickHandle(e)})).on("click","grants1-5sp9tb-right",(function(e){DutchGrantsClickHandle(e)})).on("click","gravesend_boundaries-c6qrbw-right",(function(e){GravesendClickHandle(e)})).on("click","native-groups-area-right",(function(e){NativeGroupsClickHandle(e)})).on("click","karl_long_island-right",(function(e){KarlClickHandle(e)})).on("click","curr-lots-right",(function(e){CurrLotsHandle(e)})).on("click",(function(){DefaultHandle()}))})),beforeMap.on("error",(function(e){e&&"Error"!==e.error&&console.log(e)})),afterMap.on("error",(function(e){e&&"Error"!==e.error&&console.log(e)}));var lbl_color="#482525",lbl_color_hover="#ff0000",LongIslandZoomLabel={id:"label-long-island",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Long Island",icon:"circle"},geometry:{type:"Point",coordinates:[-72.94912,40.85225]}}]}},layout:{visibility:"visible","text-font":["Asap Medium"],"text-field":"{title}","text-size":18},paint:{"text-color":"#000000","text-halo-width":3,"text-halo-blur":2,"text-halo-color":"#ffffff","text-opacity":{default:1,stops:[[7.5,0],[8,1]]}}},BrooklynZoomLabel={id:"label-brooklyn",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Brooklyn",icon:"circle"},geometry:{type:"Point",coordinates:[-73.93772792292754,40.65432897355928]}}]}},layout:{visibility:"visible","text-font":["Asap Medium"],"text-field":"{title}","text-size":18},paint:{"text-color":"#000000","text-halo-width":3,"text-halo-blur":2,"text-halo-color":"#ffffff","text-opacity":{default:1,stops:[[10.2,0],[10.5,1]]}}},NewAmsterdamZoomLabel={id:"label-new-amsterdam",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"New Amsterdam",icon:"circle"},geometry:{type:"Point",coordinates:[-74.01255,40.704882]}}]}},layout:{visibility:"visible","text-font":["Asap Medium"],"text-field":"{title}","text-size":18},paint:{"text-color":"#000000","text-halo-width":3,"text-halo-blur":2,"text-halo-color":"#ffffff","text-opacity":{default:1,stops:[[6,0],[6.5,1]]}}},ManhattanZoomLabel={id:"label-manhattan",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Manhattan",icon:"circle"},geometry:{type:"Point",coordinates:[-73.97719031118277,40.78097749612493]}}]}},layout:{visibility:"visible","text-font":["Asap Medium"],"text-field":"{title}","text-size":18},paint:{"text-color":"#000000","text-halo-width":3,"text-halo-blur":2,"text-halo-color":"#ffffff","text-opacity":{default:1,stops:[[10.2,0],[10.5,1]]}}},NewNetherlandZoomLabel={id:"label-new-netherland",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"New Netherland",icon:"circle"},geometry:{type:"Point",coordinates:[-73.60361111111109,41.09659166666665]}}]}},layout:{visibility:"visible","text-font":["Asap Medium"],"text-field":"{title}","text-size":18},paint:{"text-color":"#000000","text-halo-width":3,"text-halo-blur":2,"text-halo-color":"#ffffff"}},NewEnglandZoomLabel={id:"label-new-england",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"New England",icon:"circle"},geometry:{type:"Point",coordinates:[-71.67755127,42.4971076267]}}]}},minzoom:5.2,layout:{visibility:"visible","text-font":["Asap Medium"],"text-field":"{title}","text-size":18},paint:{"text-color":"#000000","text-halo-width":3,"text-halo-blur":2,"text-halo-color":"#ffffff","text-opacity":{default:1,stops:[[5.2,0],[5.6,1]]}}};beforeMap.on("style.load",(function(){console.log("style change");var e=moment($("#date").text()).unix(),t=parseInt(moment.unix(e).format("YYYY")),a=parseInt(moment.unix(e).format("YYYYMMDD"));console.log(e),console.log(t),console.log(a),addKarlBeforeLayers(a),addKarlLinesBeforeLayers(a),addSettlementsBeforeLayers(a),addSettlementsLabelsBeforeLayers(a),addInfoBeforeLayers(a),addInfoLabelsBeforeLayers(a),setTimeout((function(){addGravesendBeforeLayers(a),addGravesendLinesBeforeLayers(a),addGrantLotsBeforeLayers(a),addGrantLotsLinesBeforeLayers(a),addBeforeLayers(t,a),addBeforeFarmsLayer(a)}),1e3),setTimeout((function(){addBeforeLabelsLayer(),addCastelloBeforeLayers(),addCurrentLotsBeforeLayers(),addCurrentLotsLinesBeforeLayers(),addCurrentBuildingsBeforeLayers(),addCurrentBuildingsLinesBeforeLayers(),addManahattaBeforeLayers(),addLongIslandCoastlineBeforeLayers(),addIndianPathsBeforeLayers(),addLongIslandNativeGroupsBeforeLayers()}),2e3)})),afterMap.on("style.load",(function(){console.log("style change after");var e=moment($("#date").text()).unix(),t=parseInt(moment.unix(e).format("YYYY")),a=parseInt(moment.unix(e).format("YYYYMMDD"));console.log(e),console.log(t),console.log(a),setTimeout((function(){addKarlAfterLayers(a),addKarlLinesAfterLayers(a),addSettlementsAfterLayers(a),addSettlementsLabelsAfterLayers(a),addInfoAfterLayers(a),addInfoLabelsAfterLayers(a)}),500),setTimeout((function(){addGravesendAfterLayers(a),addGravesendLinesAfterLayers(a),addGrantLotsAfterLayers(a),addGrantLotsLinesAfterLayers(a),addAfterLayers(t,a),addAfterFarmsLayer(a)}),1500),setTimeout((function(){addAfterLabelsLayer(),addCastelloAfterLayers(),addCurrentLotsAfterLayers(),addCurrentLotsLinesAfterLayers(),addCurrentBuildingsAfterLayers(),addCurrentBuildingsLinesAfterLayers(),addManahattaAfterLayers(),addLongIslandCoastlineAfterLayers(),addIndianPathsAfterLayers(),addLongIslandNativeGroupsAfterLayers()}),2500)}));